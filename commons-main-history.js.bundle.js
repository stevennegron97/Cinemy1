"use strict";(self.webpackChunkOnlineFreeWatch=self.webpackChunkOnlineFreeWatch||[]).push([[707],{4499:(n,t,e)=>{e.d(t,{Fu:()=>p,yJ:()=>l,zR:()=>k});var o=e(8168),a=e(4307),i=e(8783),r=e(7573),s=e(1561);function c(n){return"/"===n.charAt(0)?n:"/"+n}function h(n,t){return 0===n.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(n.charAt(t.length))}function u(n,t){return h(n,t)?n.substr(t.length):n}function d(n){return"/"===n.charAt(n.length-1)?n.slice(0,-1):n}function f(n){var t=n.pathname,e=n.search,o=n.hash,a=t||"/";return e&&"?"!==e&&(a+="?"===e.charAt(0)?e:"?"+e),o&&"#"!==o&&(a+="#"===o.charAt(0)?o:"#"+o),a}function l(n,t,e,i){var r;"string"==typeof n?(r=function(n){var t=n||"/",e="",o="",a=t.indexOf("#");-1!==a&&(o=t.substr(a),t=t.substr(0,a));var i=t.indexOf("?");return-1!==i&&(e=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===e?"":e,hash:"#"===o?"":o}}(n),r.state=t):(void 0===(r=(0,o.A)({},n)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(n){throw n instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):n}return e&&(r.key=e),i?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=(0,a.A)(r.pathname,i.pathname)):r.pathname=i.pathname:r.pathname||(r.pathname="/"),r}function p(n,t){return n.pathname===t.pathname&&n.search===t.search&&n.hash===t.hash&&n.key===t.key&&(0,i.A)(n.state,t.state)}function v(){var n=null;var t=[];return{setPrompt:function(t){return(0,r.A)(null==n,"A history supports only one prompt at a time"),n=t,function(){n===t&&(n=null)}},confirmTransitionTo:function(t,e,o,a){if(null!=n){var i="function"==typeof n?n(t,e):n;"string"==typeof i?"function"==typeof o?o(i,a):((0,r.A)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),a(!0)):a(!1!==i)}else a(!0)},appendListener:function(n){var e=!0;function o(){e&&n.apply(void 0,arguments)}return t.push(o),function(){e=!1,t=t.filter((function(n){return n!==o}))}},notifyListeners:function(){for(var n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];t.forEach((function(n){return n.apply(void 0,e)}))}}}var w=!("undefined"==typeof window||!window.document||!window.document.createElement);function m(n,t){t(window.confirm(n))}var y="popstate",g="hashchange";function A(){try{return window.history.state||{}}catch(n){return{}}}function k(n){void 0===n&&(n={}),w||(0,s.A)(!1,"Browser history needs a DOM");var t,e=window.history,a=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),p=n,k=p.forceRefresh,b=void 0!==k&&k,O=p.getUserConfirmation,x=void 0===O?m:O,L=p.keyLength,P=void 0===L?6:L,T=n.basename?d(c(n.basename)):"";function E(n){var t=n||{},e=t.key,o=t.state,a=window.location,i=a.pathname+a.search+a.hash;return(0,r.A)(!T||h(i,T),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+T+'".'),T&&(i=u(i,T)),l(i,o,e)}function C(){return Math.random().toString(36).substr(2,P)}var R=v();function S(n){(0,o.A)(J,n),J.length=e.length,R.notifyListeners(J.location,J.action)}function U(n){(function(n){return void 0===n.state&&-1===navigator.userAgent.indexOf("CriOS")})(n)||B(E(n.state))}function M(){B(E(A()))}var j=!1;function B(n){if(j)j=!1,S();else{R.confirmTransitionTo(n,"POP",x,(function(t){t?S({action:"POP",location:n}):function(n){var t=J.location,e=H.indexOf(t.key);-1===e&&(e=0);var o=H.indexOf(n.key);-1===o&&(o=0);var a=e-o;a&&(j=!0,W(a))}(n)}))}}var F=E(A()),H=[F.key];function I(n){return T+f(n)}function W(n){e.go(n)}var Y=0;function z(n){1===(Y+=n)&&1===n?(window.addEventListener(y,U),i&&window.addEventListener(g,M)):0===Y&&(window.removeEventListener(y,U),i&&window.removeEventListener(g,M))}var D=!1;var J={length:e.length,action:"POP",location:F,createHref:I,push:function(n,t){(0,r.A)(!("object"==typeof n&&void 0!==n.state&&void 0!==t),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o="PUSH",i=l(n,t,C(),J.location);R.confirmTransitionTo(i,o,x,(function(n){if(n){var t=I(i),s=i.key,c=i.state;if(a)if(e.pushState({key:s,state:c},null,t),b)window.location.href=t;else{var h=H.indexOf(J.location.key),u=H.slice(0,h+1);u.push(i.key),H=u,S({action:o,location:i})}else(0,r.A)(void 0===c,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=t}}))},replace:function(n,t){(0,r.A)(!("object"==typeof n&&void 0!==n.state&&void 0!==t),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o="REPLACE",i=l(n,t,C(),J.location);R.confirmTransitionTo(i,o,x,(function(n){if(n){var t=I(i),s=i.key,c=i.state;if(a)if(e.replaceState({key:s,state:c},null,t),b)window.location.replace(t);else{var h=H.indexOf(J.location.key);-1!==h&&(H[h]=i.key),S({action:o,location:i})}else(0,r.A)(void 0===c,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(t)}}))},go:W,goBack:function(){W(-1)},goForward:function(){W(1)},block:function(n){void 0===n&&(n=!1);var t=R.setPrompt(n);return D||(z(1),D=!0),function(){return D&&(D=!1,z(-1)),t()}},listen:function(n){var t=R.appendListener(n);return z(1),function(){z(-1),t()}}};return J}}}]);
//# sourceMappingURL=commons-main-history.js.bundle.js.map